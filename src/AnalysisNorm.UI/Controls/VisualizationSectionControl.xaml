<UserControl x:Class="AnalysisNorm.UI.Controls.VisualizationSectionControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Заголовок секции -->
        <TextBlock Grid.Row="0" 
                   Text="Визуализация" 
                   FontSize="16" FontWeight="SemiBold" 
                   Margin="0,0,0,16"/>

        <!-- Кнопка открытия графика - аналог Python view_plot_btn -->
        <Button Grid.Row="1"
                Content="Открыть график в окне"
                Command="{Binding DataContext.OpenPlotCommand, RelativeSource={RelativeSource AncestorType=Window}}"
                Style="{StaticResource MaterialDesignRaisedButton}"
                materialDesign:ButtonAssist.CornerRadius="4"
                Padding="20,10"
                FontWeight="Medium"
                Margin="0,0,0,16">
            <Button.ContentTemplate>
                <DataTemplate>
                    <StackPanel Orientation="Horizontal">
                        <materialDesign:PackIcon Kind="ChartLineVariant" 
                                                Width="20" Height="20"
                                                VerticalAlignment="Center"
                                                Margin="0,0,8,0"/>
                        <TextBlock Text="{Binding}" VerticalAlignment="Center"/>
                    </StackPanel>
                </DataTemplate>
            </Button.ContentTemplate>
        </Button>

        <!-- Группы управляющих кнопок -->
        <StackPanel Grid.Row="2" Margin="0,0,0,16">
            
            <!-- Управление нормами - аналог Python norms_management_section -->
            <materialDesign:Card materialDesign:ElevationAssist.Elevation="Dp1" 
                                 Padding="12" Margin="0,0,0,12">
                <StackPanel>
                    <TextBlock Text="Управление нормами" 
                               FontWeight="SemiBold" 
                               Margin="0,0,0,8"/>
                    
                    <Button Content="Информация о хранилище норм"
                            Command="{Binding DataContext.ShowNormStorageInfoCommand, RelativeSource={RelativeSource AncestorType=Window}}"
                            Style="{StaticResource MaterialDesignOutlinedButton}"
                            HorizontalAlignment="Stretch"
                            Padding="12,6"
                            Margin="0,0,0,6">
                        <Button.ContentTemplate>
                            <DataTemplate>
                                <StackPanel Orientation="Horizontal">
                                    <materialDesign:PackIcon Kind="InformationOutline" 
                                                            Width="16" Height="16"
                                                            VerticalAlignment="Center"
                                                            Margin="0,0,6,0"/>
                                    <TextBlock Text="{Binding}" VerticalAlignment="Center" FontSize="12"/>
                                </StackPanel>
                            </DataTemplate>
                        </Button.ContentTemplate>
                    </Button>
                    
                    <Button Content="Валидировать нормы"
                            Command="{Binding DataContext.ValidateNormsCommand, RelativeSource={RelativeSource AncestorType=Window}}"
                            Style="{StaticResource MaterialDesignOutlinedButton}"
                            HorizontalAlignment="Stretch"
                            Padding="12,6">
                        <Button.ContentTemplate>
                            <DataTemplate>
                                <StackPanel Orientation="Horizontal">
                                    <materialDesign:PackIcon Kind="CheckCircleOutline" 
                                                            Width="16" Height="16"
                                                            VerticalAlignment="Center"
                                                            Margin="0,0,6,0"/>
                                    <TextBlock Text="{Binding}" VerticalAlignment="Center" FontSize="12"/>
                                </StackPanel>
                            </DataTemplate>
                        </Button.ContentTemplate>
                    </Button>
                </StackPanel>
            </materialDesign:Card>

            <!-- Информация о данных - аналог Python data_info_section -->
            <materialDesign:Card materialDesign:ElevationAssist.Elevation="Dp1" 
                                 Padding="12">
                <StackPanel>
                    <TextBlock Text="Информация о данных" 
                               FontWeight="SemiBold" 
                               Margin="0,0,0,8"/>
                    
                    <Button Content="Статистика маршрутов"
                            Command="{Binding DataContext.ShowRoutesStatisticsCommand, RelativeSource={RelativeSource AncestorType=Window}}"
                            Style="{StaticResource MaterialDesignOutlinedButton}"
                            HorizontalAlignment="Stretch"
                            Padding="12,6">
                        <Button.ContentTemplate>
                            <DataTemplate>
                                <StackPanel Orientation="Horizontal">
                                    <materialDesign:PackIcon Kind="ChartBar" 
                                                            Width="16" Height="16"
                                                            VerticalAlignment="Center"
                                                            Margin="0,0,6,0"/>
                                    <TextBlock Text="{Binding}" VerticalAlignment="Center" FontSize="12"/>
                                </StackPanel>
                            </DataTemplate>
                        </Button.ContentTemplate>
                    </Button>
                </StackPanel>
            </materialDesign:Card>
        </StackPanel>

        <!-- Информационная область - аналог Python plot_info -->
        <ScrollViewer Grid.Row="3" 
                      VerticalScrollBarVisibility="Auto" 
                      HorizontalScrollBarVisibility="Auto"
                      Padding="0,0,4,0">
            
            <TextBox x:Name="PlotInfoTextBox"
                     Text="{Binding PlotInfoText, Mode=OneWay}"
                     IsReadOnly="True"
                     TextWrapping="Wrap"
                     AcceptsReturn="True"
                     Background="Transparent"
                     BorderThickness="1"
                     BorderBrush="{DynamicResource MaterialDesignDivider}"
                     FontFamily="Segoe UI"
                     FontSize="12"
                     Padding="12"
                     VerticalContentAlignment="Top"/>
        </ScrollViewer>
    </Grid>
</UserControl>